input {
  # just for testing
  http {
    port => 12345
    codec => json
  }
}
filter {
  if [event][isTouch] {
    if [dimensions][sW] > 600 or [dimensions][sH] > 900 {
      mutate {
        add_field => {
          "user.deviceType" => "tablet"
        }
      }
    } else {
      mutate {
        add_field => {
          "user.deviceType" => "mobile"
        }
      }
    }
  } else {
    mutate {
      add_field => {
        "user.deviceType" => "pc"
      }
    }
  }
  mutate {
    add_field => {
      "user.deviceSize" => "%{[dimensions][sH]} X %{[dimensions][sW]}"
    }
  }
}
output {
  elasticsearch {
    hosts => ["https://ecabb7613cba2f7470754b45ed1f732a.us-east-1.aws.found.io:9243/"]
    index => "dimension"
    user => "elastic"
    password => "IqJ2uDK0768AKTVBKeANm8s7"
  }
  stdout { codec => json }
}